<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Fast Food Menu</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { font-family: Arial, sans-serif; background: #f7f7f7; }
        .menu { display: flex; flex-wrap: wrap; gap: 16px; max-width: 400px; margin: 40px auto; }
        .item { background: #fff; border-radius: 10px; box-shadow: 0 2px 8px #0001; padding: 16px; width: 120px; text-align: center; }
        .item img { width: 48px; height: 48px; }
        .counter-block {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            margin-top: 8px;
        }
        .counter-btn {
            background: #ffb300;
            border: none;
            border-radius: 5px;
            width: 32px;
            height: 32px;
            color: #fff;
            font-size: 22px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.2s;
        }
        .counter-btn:active {
            background: #e69500;
        }
        .counter-value {
            min-width: 28px;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            color: #1a8f1a;
        }
        .add-btn {
            margin-top: 8px;
            background: #ffb300;
            border: none;
            border-radius: 5px;
            padding: 6px 12px;
            color: #fff;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.2s;
        }
        .add-btn:active {
            background: #e69500;
        }
        .input-block { display: flex; justify-content: center; align-items: center; gap: 8px; margin: 30px auto 0 auto; }
        .input-block input { width: 60px; padding: 6px; font-size: 18px; border-radius: 5px; border: 1px solid #ccc; text-align: center; }
        .input-block button { background: #1a8f1a; color: #fff; border: none; border-radius: 5px; padding: 6px 14px; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>
    <div class="input-block">
        <input type="number" id="userNumber" placeholder="–ß–∏—Å–ª–æ">
        <button onclick="updateNumberLot()">–ò–∑–º–µ–Ω–∏—Ç—å –ª–æ—Ç-—á–∏—Å–ª–æ</button>
    </div>
    <div class="menu" id="menu"></div>
    <script>
        // –õ–æ—Ç-—á–∏—Å–ª–æ –≤—Å–µ–≥–¥–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –≤ –º–∞—Å—Å–∏–≤–µ!
        const menu = [
            { name: '–ë—É—Ä–≥–µ—Ä', price: 250, img: 'üçî' },
            { name: '–§—Ä–∏', price: 150, img: 'üçü' },
            { name: '–•–æ—Ç–¥–æ–≥', price: 200, img: 'üå≠' },
            { name: '–¢–∞–∫–æ', price: 250, img: 'üåÆ' },
            { name: '–ü–∏—Ü—Ü–∞', price: 700, img: 'üçï' },
            { name: '7', img: 'üî¢', isNumberLot: true } // –ª–æ—Ç-—á–∏—Å–ª–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        ];

        // –ò–Ω–¥–µ–∫—Å—ã —Ç–æ–≤–∞—Ä–æ–≤, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å—á–µ—Ç—á–∏–∫ (–∫—Ä–æ–º–µ –ª–æ—Ç–∞-—á–∏—Å–ª–∞)
        const counters = {}; // { idx: count }

        function getPrice(item) {
            if (item.isNumberLot && !isNaN(item.name)) {
                return Math.floor(Number(item.name) * 5.5);
            }
            return item.price;
        }

        function renderMenu() {
            const menuDiv = document.getElementById('menu');
            menuDiv.innerHTML = '';
            menu.forEach((item, idx) => {
                const price = getPrice(item);
                let html = `
                    <div class="item">
                        <div style="font-size:32px">${item.img}</div>
                        <div>${item.name} - ${price} —Ä—É–±–ª–µ–π</div>
                `;
                // –î–ª—è –ª–æ—Ç–∞-—á–∏—Å–ª–∞ –æ–±—ã—á–Ω–∞—è –∫–Ω–æ–ø–∫–∞
                if (item.isNumberLot) {
                    html += `<button class="add-btn" onclick="addToCart(${idx})">–î–æ–±–∞–≤–∏—Ç—å</button>`;
                } else if (counters[idx]) {
                    // –ï—Å–ª–∏ –±—ã–ª –Ω–∞–∂–∞—Ç "–î–æ–±–∞–≤–∏—Ç—å", –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫
                    html += `
                        <div class="counter-block">
                            <button class="counter-btn" onclick="decrement(${idx})">-</button>
                            <span class="counter-value" id="counter-${idx}">${counters[idx]}</span>
                            <button class="counter-btn" onclick="increment(${idx})">+</button>
                        </div>
                    `;
                } else {
                    // –û–±—ã—á–Ω–∞—è –∫–Ω–æ–ø–∫–∞ "–î–æ–±–∞–≤–∏—Ç—å"
                    html += `<button class="add-btn" onclick="showCounter(${idx})">–î–æ–±–∞–≤–∏—Ç—å</button>`;
                }
                html += `</div>`;
                menuDiv.innerHTML += html;
            });
        }

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –¥–ª—è —Ç–æ–≤–∞—Ä–∞
        window.showCounter = function(idx) {
            counters[idx] = 1;
            renderMenu();
        }

        // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
        window.increment = function(idx) {
            counters[idx]++;
            renderMenu();
        }

        // –£–º–µ–Ω—å—à–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ, –µ—Å–ª–∏ 0 ‚Äî —É–±–∏—Ä–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–Ω–æ–ø–∫—É
        window.decrement = function(idx) {
            if (counters[idx] > 1) {
                counters[idx]--;
            } else {
                delete counters[idx];
            }
            renderMenu();
        }

        // –î–æ–±–∞–≤–ª—è–µ–º –≤ –∫–æ—Ä–∑–∏–Ω—É (–¥–ª—è –ª–æ—Ç–∞-—á–∏—Å–ª–∞)
        window.addToCart = function(idx) {
            const item = menu[idx];
            const price = getPrice(item);
            Telegram.WebApp.HapticFeedback.notificationOccurred('success');
            Telegram.WebApp.showPopup({
                title: "–î–æ–±–∞–≤–ª–µ–Ω–æ!",
                message: `${item.name} –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É.`,
                buttons: [{id: 'ok', type: 'close', text: '–û–ö'}]
            });
        }

        // –ò–∑–º–µ–Ω—è–µ–º –ª–æ—Ç-—á–∏—Å–ª–æ
        window.updateNumberLot = function() {
            const input = document.getElementById('userNumber');
            const value = input.value.trim();
            if (value === '' || isNaN(value)) {
                alert('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —á–∏—Å–ª–æ!');
                return;
            }
            const numberLot = menu.find(item => item.isNumberLot);
            numberLot.name = value;
            input.value = '';
            renderMenu();
        }

        renderMenu();
    </script>
</body>
</html>
